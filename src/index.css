/* ============================================ */
/* Estilos Base con la Nueva Temática (CORREGIDO) */
/* ============================================ */
body {
  @apply bg-dark-main text-light-main font-fira;
}

/* --- Estilos de la Navegación --- */
.new-nav { @apply flex gap-[30px] justify-center items-center my-8 text-xl; }
.new-nav-item {
  @apply p-0 bg-transparent border-none text-2xl; 
  color: #99ff33;
  opacity: 0.7;
  @apply cursor-pointer transition-opacity duration-200 tracking-wider font-fira hover:opacity-100;
}
.new-nav-item.active {
  opacity: 1;
  @apply text-brand-green-light font-bold text-shadow-glow;
}

/* ======== ESTILOS MODERNIZADOS DEL EXTRACTOR (CORREGIDO) ======== */
.input-panel {
  @apply flex flex-col items-center w-full px-4;
}

.textarea-style {
  @apply w-full max-w-4xl h-48 p-4 mb-4 rounded-lg resize-y bg-[#2d2d2d] text-[#e0e0e0] border-2 border-blue-500/50 focus:outline-none focus:ring-2 focus:ring-[#99ff33];
}

.button-row {
  @apply flex justify-between items-center w-full max-w-4xl flex-wrap gap-4 mt-2;
}

/* --- Grupo de Botones de Acción (Vuelven a ser individuales) --- */
.main-actions-group {
  @apply flex items-center gap-3; /* Espacio entre botones */
}

/* Colores y estilos individuales para los botones de acción */
.btn-azul, .btn-verde, .btn-rojo {
    @apply py-2 px-5 rounded-lg text-white font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg;
}
.btn-azul { @apply bg-blue-600 hover:enabled:bg-blue-700; }
.btn-verde { @apply bg-green-600 hover:enabled:bg-green-700; }
.btn-rojo { @apply bg-red-600 hover:enabled:bg-red-700; }

/* --- Controles de Transposición (Estilo Unificado) --- */
.transposition-controls-group {
  @apply flex items-stretch shadow-lg rounded-lg overflow-hidden;
}

.transposition-controls-group > * { 
  @apply border-none;
}

/* Color del separador entre elementos */
.transposition-controls-group > *:not(:first-child) {
  border-left: 2px solid #4a4a4a; /* Separador oscuro y sutil */
}

.btn-control { 
  @apply font-bold text-lg w-10 h-10 cursor-pointer transition-colors flex items-center justify-center;
  /* Hacemos los botones naranjas para que coincidan con los de acción */
  background-color: #4a2deeff;
  color: white;
}
.btn-control:hover {
  /* Un naranja más brillante al pasar el ratón */
  background-color: #fb923c; /* Tailwind's orange-400 */
}

.transposition-display-segment { 
  @apply font-medium px-4 flex items-center justify-center text-lg;
  /* El display central se mantiene oscuro para dar contraste */
  background-color: #3a3a3a;
  color: #e0e0e0;
  min-width: 120px;
}

/* Contenedor de la partitura extraída */
#song-output {
    @apply mt-10; /* Aumentamos el margen superior para dar más espacio */
}
/* ======== FIN DE LOS ESTILOS DEL EXTRACTOR ======== */


/* ======== ESTILOS PARA EL COMPOSITOR ======== */
.composition-header {
    @apply flex justify-between items-start w-full p-4 gap-6 flex-wrap;
}
.piano-and-name-container {
    @apply flex flex-col items-start gap-3 flex-grow;
}
.piano-container-small {
    min-height: 80px; /* Evita que el layout salte cuando el piano aparece */
}
.composer-controls {
    @apply flex flex-col items-center gap-4;
}
.btn-composer-action {
    @apply py-2 px-5 rounded-lg font-bold transition-colors shadow-lg w-full;
    background-color: #4a4a4a; /* Un gris oscuro */
    color: #e0e0e0; /* Texto claro */
    border: 1px solid #666;
}
.btn-composer-action:hover {
    background-color: #666;
    border-color: #888;
}
/* ======== FIN DE LOS ESTILOS DEL COMPOSITOR ======== */


/* --- Estilos de los Selectores y Controles --- */
.selector-panel { @apply flex gap-6 justify-center mb-4.5; }
.selector { @apply flex flex-col items-start min-w-[148px]; }
.selector-label { @apply text-light-muted text-base font-normal mb-2 ml-0.5 tracking-wider select-none; }
select.selector-box { 
  @apply bg-dark-light text-light-main py-2.5 pl-4 rounded-xl text-lg min-w-[130px] text-left tracking-wide shadow-md border-none m-0 opacity-95 font-fira;
  -webkit-appearance: none; -moz-appearance: none; appearance: none;
}
.alteraciones { @apply flex gap-3 justify-center items-center my-5; }
.alteraciones .mod-button { background-color: #232323; color: #fff; border: none; padding: 8px 16px; border-radius: 8px; font-size: 16px; cursor: pointer; opacity: 0.9; transition: all; font-family: 'Fira Mono', Consolas, Menlo, monospace; }
.alteraciones .mod-button.active { background-color: #f88634ff; color: #222; font-weight: bold; opacity: 1; }
.alteraciones .play-btn { @apply bg-dark-lighter text-light-main w-9 h-9 rounded-lg border-none text-xl ml-2 flex items-center justify-center shadow-md cursor-pointer transition-all font-fira; }

.chord-label { @apply text-center text-brand-green text-3xl mb-9 mt-4.5 tracking-widest font-normal leading-tight; }

/* ============================================ */
/* ESTILOS DE LA PARTITURA (Song Sheet)         */
/* ============================================ */
.song-sheet-container { @apply text-left; }

/* AQUÍ ESTÁ LA MAGIA:
  1. Hacemos la letra base de toda la línea más grande. 
     Esta será la "regla" que usan los acordes para posicionarse.
     Puedes cambiar este valor (ej. 1.25rem, 1.75rem) para ajustar el tamaño.
*/
.song-line {
  @apply relative pt-4 mb-3 w-max min-w-full;
  font-size: 1.7rem; /* <-- LETRA GRANDE */
}

/* 2. La letra de la canción simplemente hereda el tamaño grande de su padre.
*/
.lyrics-layer { 
  @apply text-[#ccc] whitespace-pre cursor-text leading-normal;
}

.chords-layer { @apply absolute top-0 left-0 h-6 pointer-events-none; }
.chord-positioner { @apply absolute top-0 pointer-events-auto; }

/* 3. Le devolvemos al texto del acorde su tamaño original (más pequeño).
     Esto no afecta su posición porque la "regla" ya fue definida por .song-line
*/
.chord-visual { 
  @apply inline-block cursor-pointer text-[#6cb2f7] font-bold select-none whitespace-nowrap leading-none p-1 rounded transition-colors;
  font-size: 1rem; /* <-- LETRA PEQUEÑA */
}

.chord-visual:hover { @apply bg-white/10; }

/* ============================================ */
/* ESTILOS DEL MODAL (CORREGIDO)              */
/* ============================================ */
.chord-inspector-overlay { @apply fixed inset-0 bg-black/60 z-100 cursor-pointer transition-all opacity-0 invisible; }
.chord-inspector-modal {
  @apply fixed top-1/2 left-1/2 bg-dark-light rounded-2xl p-6 z-101 shadow-2xl transition-all w-[90%] max-w-[650px] opacity-0 invisible;
  transform: translate(-50%, -50%) scale(0.95);
}
.chord-inspector-overlay.visible, .chord-inspector-modal.visible { @apply opacity-100 visible; }
.chord-inspector-modal.visible { transform: translate(-50%, -50%) scale(1); }
.inspector-header { @apply flex justify-between items-center pb-4 border-b border-grey mb-5 gap-4; }

/* --- ¡¡AQUÍ ESTÁ LA CORRECCIÓN!! --- */
.btn-primary-modal { @apply font-fira border-none py-2 px-4 rounded-lg text-dark-main bg-brand-green font-bold transition-all; }
.btn-delete-modal { @apply font-fira border-none py-2 px-4 rounded-lg text-light-main bg-accent-red font-bold transition-all; }
.play-btn-modal { @apply font-fira bg-dark-lighter text-light-main w-9 h-9 rounded-lg border-none text-xl flex items-center justify-center shadow-md cursor-pointer transition-all; }
.btn-close-modal { @apply font-fira bg-transparent border-none text-light-muted text-4xl cursor-pointer leading-none p-0 px-2 transition-colors hover:text-light-main; }


/* ============================================ */
/* ESTILOS ORIGINALES DEL PIANO (Restaurados)   */
/* ============================================ */
.piano { position: relative; display: flex; margin: 20px auto; padding: 12px; background: #1e1e1e; border-radius: 12px; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2); flex-shrink: 0; min-width: fit-content; }
.piano .key { cursor: pointer; position: relative; flex-shrink: 1; flex-grow: 1; min-width: 20px; max-width: 60px; }
.piano .note-name { display: block; position: absolute; bottom: 10px; left: 0; width: 100%; text-align: center; font-size: clamp(0.8rem, 2vw, 1.1rem); font-weight: 500; color: #444; pointer-events: none; }
.piano .white { height: 200px; aspect-ratio: 45 / 200; background: linear-gradient(to bottom, #f9f9f9, #e0e0e0); border: 1px solid #a0a0a0; border-left: none; box-shadow: inset 0 -5px 10px rgba(0,0,0,0.1), 0 2px 2px rgba(0,0,0,0.2); border-bottom-left-radius: 6px; border-bottom-right-radius: 6px; }
.piano .white:first-child { border-left: 1px solid #a0a0a0; border-top-left-radius: 6px; }
.piano .white:last-child { border-top-right-radius: 6px; }
.piano .white.pressed { background: #1665f9ff; box-shadow: 0 0 30px -4px #3988e2ff; }
.piano .white.bass-note { background: #f97316; box-shadow: 0 0 30px -4px #f97316; }
.piano .white.pressed .note-name, .piano .white.bass-note .note-name { color: #F0F0F0; text-shadow: 0 0 4px rgba(0,0,0,0.5); }
.piano .black { position: absolute; top: -1px; width: 60%; height: 60%; background: linear-gradient(to bottom, #3a3a3a, #111); border: 1px solid #000; border-radius: 0 0 5px 5px; z-index: 2; box-shadow: inset 0 -4px 8px rgba(255, 255, 255, 0.15), 0 3px 6px rgba(0,0,0,0.4); }
.piano .white .black { left: calc(100% - (60% / 2)); }
.piano .black.pressed { background: #1665f9ff; box-shadow: 0 0 20px 2px #3988e2ff; }
.piano .black.bass-note { background: #f97316; box-shadow: 0 0 20px 2px #f97316; }


/* === AJUSTE PARA EL PIANO DEL COMPOSITOR === */
#composer-piano-display .piano .white {
    height: 150px; /* Reducimos la altura de 200px a 150px */
}

/* === AJUSTE PARA EL PIANO DEL INSPECTOR === */
.inspector-piano-container .piano {
    min-width: unset; /* Permitir que el piano se encoja */
    width: 100%; /* Ocupar el 100% del ancho disponible en el contenedor */
    max-width: 600px; /* Aumentar el ancho máximo */
}

.inspector-piano-container .piano .white {
    height: 180px; /* Aumentar la altura de las teclas blancas */
    min-width: 15px; /* Permitir que las teclas blancas sean más estrechas */
}

.inspector-piano-container .piano .black {
    width: 60%; /* Ajustar el ancho de las teclas negras a una proporción más adecuada */
    height: 60%; /* Ajustar la altura de las teclas negras a una proporción más adecuada */
}
